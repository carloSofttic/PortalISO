<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Registro — Plataforma ISO</title>

  <!-- Estilos globales -->
  <link rel="stylesheet" th:href="@{/css/register.css}">
</head>

<body>
  <div class="wrapper">
    <div class="card">
      <div class="logo">Certificaciones ISO</div>
      <h1>Registro de nueva cuenta</h1>
      <p class="intro">Registra tu empresa y crea tu cuenta de usuario principal.</p>

      <!-- Mensajes de servidor -->
      <div th:if="${ok}" class="alert success" th:text="${ok}"></div>
      <div th:if="${error}" class="alert error" th:text="${error}"></div>

      <form th:action="@{/register}" th:object="${form}" method="post" id="registerForm" novalidate>
        <div>
          <label>Datos de la Empresa</label>
        </div>

        <div>
          <label for="nombreEmpresa">Nombre de la empresa</label>
          <input type="text" id="nombreEmpresa" th:field="*{nombreEmpresa}" required>
          <span class="error-msg" th:if="${#fields.hasErrors('nombreEmpresa')}" th:errors="*{nombreEmpresa}"></span>
        </div>

        <div>
          <label for="rfc">RFC (opcional)</label>
          <input type="text" id="rfc" th:field="*{rfc}" required>
          <span class="error-msg" th:if="${#fields.hasErrors('rfc')}" th:errors="*{rfc}"></span>
        </div>

        <div>
          <label for="fechaCreacion">Fecha de Creación</label>
          <input type="date" id="fechaCreacion" name="fechaCreacion" th:field="*{fechaCreacion}"
            th:value="${form.fechaCreacion != null ? #temporals.format(form.fechaCreacion, 'yyyy-MM-dd') : ''}"
            required>
          <span class="error-msg" th:if="${#fields.hasErrors('fechaCreacion')}" th:errors="*{fechaCreacion}"></span>
        </div>

        <hr>
        <div>
          <label>Datos del representante</label>
        </div>

        <div>
          <label for="nombreMiembro">Nombre del representante</label>
          <input type="text" id="nombreMiembro" th:field="*{nombreMiembro}" required>
          <span class="error-msg" th:if="${#fields.hasErrors('nombreMiembro')}" th:errors="*{nombreMiembro}"></span>
        </div>

        <div>
          <label for="appaternoMiembro">Apellido Paterno</label>
          <input type="text" id="appaternoMiembro" th:field="*{appaternoMiembro}" required>
          <span class="error-msg" th:if="${#fields.hasErrors('appaternoMiembro')}"
            th:errors="*{appaternoMiembro}"></span>
        </div>

        <div>
          <label for="apmaternoMiembro">Apellido Materno</label>
          <input type="text" id="apmaternoMiembro" th:field="*{apmaternoMiembro}" required>
          <span class="error-msg" th:if="${#fields.hasErrors('apmaternoMiembro')}"
            th:errors="*{apmaternoMiembro}"></span>
        </div>

        <div>
          <label for="telefono">Número Telefónico</label>
          <input type="tel" id="telefono" th:field="*{telefono}" placeholder="Ejemplo: 5512345678" required>
          <span class="error-msg" th:if="${#fields.hasErrors('telefono')}" th:errors="*{telefono}"></span>
        </div>

        <div>
          <label for="correo">Correo electrónico</label>
          <input type="email" id="correo" th:field="*{correo}" placeholder="ejemplo@correo.com" required>
          <span class="error-msg" th:if="${#fields.hasErrors('correo')}" th:errors="*{correo}"></span>
        </div>

        <div>
          <label for="rolMiembro">Rol dentro de la empresa</label>
          <input type="text" id="rolMiembro" th:field="*{rolMiembro}" required>
          <span class="error-msg" th:if="${#fields.hasErrors('rolMiembro')}" th:errors="*{rolMiembro}"></span>
        </div>

        <div>
          <label for="password">Contraseña</label>
          <input type="password" id="password" th:field="*{password}" required>
          <div id="password-strength">
            <div id="password-bar"></div>
          </div>
          <span id="password-msg" class="error-msg"></span>
          <span class="error-msg" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></span>
        </div>

        <button type="submit">Crear cuenta</button>
      </form>


      <div class="footer">
        ¿Ya tienes cuenta?
        <a th:href="@{/login}" class="register-link">Inicia sesión</a>

        
      </div>
    </div>
  </div>

  <script th:src="@{/js/register-validation.js}"></script>
</body>

</html>